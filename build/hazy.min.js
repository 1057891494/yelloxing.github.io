/*!
* yelloxing.github.io Sprout2.0.0 hazy
* https://yelloxing.github.io
* 
* Copyright 心叶 and other contributors
* 
* Released under the Apache-2.0
* 
* Sprout 新芽 V2
* 
* Date: 2017-09-29
*/

!function(e,t,n){"use strict";if(!e||!e.document)throw new Error("Hazy requires a window with a document!");t(e)}(window,function(e){"use strict";var t=function(e,n){return new t.prototype.init(e,n)};t.prototype.init=function(r,i,o){o=o||n,i=i?t(i)[0]:document,this.length=0,this.context=i,this.selector=r;var s,c;if(!r)return this;if("body"==r)return this.context=document,this[0]=document.body,this.isTouch=!0,this.length=1,this;if(r===e)return this.context=document,this[0]=e,this.isTouch=!0,this.length=1,this;if("string"==typeof r){if(t.isHtmlTemplate(r)){var l=document.createElement("div");return l.innerHTML=r,this[0]=l.childNodes[0],this.isTouch=!0,this.length=1,this.context=void 0,this}if(t.isCssSelect(r)){this.isTouch=!0;var a;if(/^#[_\w$](?:[_\w\d$]|-)*$/.test(r))!(a=i.getElementById(r.replace(/^#/,"")))||1!==a.nodeType&&11!==a.nodeType&&9!==a.nodeType?this.length=0:(this[0]=a,this.length=1);else if(/^[_\w$](?:[_\w\d$]|-)*$/.test(r)){var u=i.getElementsByTagName(r);for(s=0,c=0;s<u.length;s++)1!==(a=u[s]).nodeType&&11!==a.nodeType&&9!==a.nodeType||(this[c]=a,c+=1);this.length=c}return this}throw new Error("Illegal argument value！")}if(1===r.nodeType||11===r.nodeType||9===r.nodeType)return this.context=i,this[0]=r,this.isTouch=!0,this.length=1,this;if("function"==typeof r)return t.__isLoad__?r():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),r(),t.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function e(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),r(),t.__isLoad__=!0)}),this;if(r.isTouch){for(this.isTouch=!0,s=0;s<r.length;s++)this[s]=r[s];return this.context=r.context||i,this.length=r.length,this.selector=r.selector,this}return this};var n=t(document);t.prototype.extend=t.extend=function(){var e=arguments[0]||{},t=arguments[1]||{};1===arguments.length&&(t=e,e=this),"object"!=typeof e&&"function"!=typeof e&&(e={});for(var n in t)try{e[n]=t[n]}catch(e){throw new Error("Illegal property value！")}return e},t.innerObject={},t.clock={},t.clock.timers=[],t.clock.interval=13,t.clock.speeds=400,t.clock.timerId=null,document.createElement("ui-view"),t.prototype.init.prototype=t.prototype,t.__isLoad__=!1,e.Hazy=e.$=t,console.log("%c"+new Date+"\n\n心叶提示：系统启动成功\n\n","color:#daaa65"),t.extend({isHtmlTemplate:function(e){return e=e.trim().replace(/[\n\f\r]/g,""),!!/^<([^<> ]+)[^<>]*><\/\1>$/.test(e)},isCssSelect:function(e){return!!/^#?[_\w$](?:[_\w\d$]|-)*$/.test(e)}}),t.extend({outerHTML:function(e){return e.outerHTML||function(e){var t,n=document.createElement("div");return n.appendChild(e),t=n.innerHTML,n=null,t}(e)},uniqueClass:function(){for(var e="",t=0;t<arguments.length;t++){if("string"!=typeof arguments[t])throw new Error("Only string is valid,not project!");e+=arguments[t]+" "}var n={};(e=e.trim()).split(/ +/).forEach(function(e){n[e]=!0},this),e="";for(var r in n)n[r]&&(e+=r+" ");return e.trim()},operateClass:function(e,t,n){if("string"!=typeof e||"string"!=typeof t)throw new Error("Only string is valid,not project!");e=e.trim(),t=t.trim();var r=e.split(/ +/),i=t.split(/ +/),o={};r.forEach(function(e){o[e]=!0},this),i.forEach(function(e){o[e]=!n&&!o[e]},this);var s="";for(var c in o)o[c]&&(s+=c+" ");return s.trim()},getXHR:function(){var n=t.innerObject.xmlhttp;return n||(n=e.XMLHttpRequest?new e.XMLHttpRequest:new e.ActiveXObject("Microsoft.XMLHTTP"),t.innerObject.xmlhttp=n,n)}}),t.prototype.extend({bind:function(n,r,i){var o=t(this);return e.attachEvent?o[0].attachEvent("on"+n,r):(i=i||!1,o[0].addEventListener(n,r,i)),o},unbind:function(n,r,i){var o=t(this);return e.detachEvent?o[0].detachEvent("on"+n,r):(i=i||!1,o[0].removeEventListener(n,r,i)),o}}),t.prototype.extend({html:function(e){var n=t(this);return""==e||e?(n[0].innerHTML=e,n):n[0].innerHTML},text:function(e){var n=t(this);return e?(n[0].innerText=e,n):n[0].innerText},val:function(e){var n=t(this);return e?(n[0].value=e,n):n[0].value},attr:function(e,n){var r=t(this);return n?(r[0].setAttribute(e,n),r):r[0].getAttribute(e)},addClass:function(e){var n=t(this);if("string"==typeof e&&e)for(var r,i=0,o=n[i];o;){r=o.getAttribute("class")||"";var s=t.uniqueClass(r,e);o.setAttribute("class",s),o=n[i],i+=1}return n},removeClass:function(e){var n=t(this);if("string"==typeof e&&e)for(var r,i=0,o=n[i];o;){r=o.getAttribute("class")||"";var s=t.operateClass(r,e,!0);o.setAttribute("class",s),o=n[i],i+=1}return n},toggleClass:function(e){var n=t(this);if("string"==typeof e&&e)for(var r,i=0,o=n[i];o;){r=o.getAttribute("class")||"";var s=t.operateClass(r,e);o.setAttribute("class",s),o=n[i],i+=1}return n},class:function(e){var n=t(this);if("string"!=typeof e||!e)return n[0].getAttribute("class")||"";for(var r=0,i=n[r];i;)i.setAttribute("class",t.uniqueClass(e)),i=n[r],r+=1;return n},css:function(e,n){var r=t(this);if("string"==typeof e&&1===arguments.length)return r[0].style[e];if("string"==typeof e&&"string"==typeof n)r[0].style[e]=n;else{if("object"!=typeof e)throw new Error("Not acceptable type!");for(var i in e)r[0].style[i]=e[i]}return r},append:function(e){var n=t(this);if(1===e.nodeType||11===e.nodeType||9===e.nodeType)n[0].appendChild(e);else if(e.isTouch)n[0].appendChild(e[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");n[0].appendChild(t(e)[0])}return n},prepend:function(e){var n=t(this);if(1===e.nodeType||11===e.nodeType||9===e.nodeType)n[0].insertBefore(e,n[0].childNodes[0]);else if(e.isTouch)n[0].insertBefore(e[0],n[0].childNodes[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");n[0].insertBefore(t(e)[0],n[0].childNodes[0])}return n},after:function(e){var n=t(this),r=n[0].parentNode||t("body")[0];if(1===e.nodeType||11===e.nodeType||9===e.nodeType)r.insertBefore(e,n[0].nextSibling);else if(e.isTouch)r.insertBefore(e[0],n[0].nextSibling);else{if("string"!=typeof e)throw new Error("Not acceptable type!");r.insertBefore(t(e)[0],n[0].nextSibling)}return n},before:function(e){var n=t(this),r=n[0].parentNode||t("body")[0];if(1===e.nodeType||11===e.nodeType||9===e.nodeType)r.insertBefore(e,n[0]);else if(e.isTouch)r.insertBefore(e[0],n[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");r.insertBefore(t(e)[0],n[0])}return n},remove:function(){var e=t(this);return(e[0].parentNode||t("body")[0]).removeChild(e[0]),e},empty:function(){var e=t(this);return e.html(""),e}}),t.prototype.extend({parent:function(){for(var e,n=t(this),r=0,i=n[r];i;){e=i;do{(e=e.parentNode)&&1===e.nodeType?n[r]=e:n[r]=null}while(e.parentNode&&!n[r]);i=n[r+=1]}return n.selector=n.selector+":parent",n},parents:function(){var e=t(this),n=e[0];e.length=0;do{(n=n.parentNode)&&1===n.nodeType&&(e[e.length]=n,e.length+=1)}while(n);return e.selector=e.selector+":parents",e},children:function(){var e=t(this),n=e[0].childNodes,r=0,i=n[r];for(e.length=0;i;)i&&1===i.nodeType&&(e[e.length]=i,e.length++),i=n[r+=1];return e.selector=e.selector+":children",e},siblings:function(){var e=t(this),n=e.parent();return e.selector=e.selector+":siblings",t(n[0]).children()},next:function(){for(var e,n=t(this),r=0,i=n[r];i;){e=i;do{(e=e.nextSibling)&&1===e.nodeType?n[r]=e:n[r]=null}while(e.nextSibling&&!n[r]);i=n[r+=1]}return n.selector=n.selector+":next",n},nextAll:function(){var e=t(this),n=e[0];e.length=0;do{(n=n.nextSibling)&&1===n.nodeType&&(e[e.length]=n,e.length+=1)}while(n);return e.selector=e.selector+":nextAll",e},prev:function(){for(var e,n=t(this),r=0,i=n[r];i;){e=i;do{(e=e.previousSibling)&&1===e.nodeType?n[r]=e:n[r]=null}while(e.previousSibling&&!n[r]);i=n[r+=1]}return n.selector=n.selector+":prev",n},prevAll:function(){var e=t(this),n=e[0];e.length=0;do{(n=n.previousSibling)&&1===n.nodeType&&(e[e.length]=n,e.length+=1)}while(n);return e.selector=e.selector+":prevAll",e},find:function(e){var n=t(this);return t(e,n[0])},first:function(){var e=t(this);return e[0]?e.length=1:e.length=0,e.selector=e.selector+":first",e},last:function(){var e=t(this);return e[e.length-1]?(e[0]=e[e.length-1],e.length=1):e.length=0,e.selector=e.selector+":last",e},eq:function(e){var n=t(this);return n[e]?(n[0]=n[e],n.length=1):n.length=0,n.selector=n.selector+":eq("+e+")",n},filter:function(e){for(var n=t(this),r=0,i=0;i<n.length;i++)e(t(n[i]))&&(n[r]=n[i],r+=1);return n.length=r,n.selector=n.selector+":filter("+e+")",n},not:function(e){for(var n=t(this),r=0,i=0;i<n.length;i++)e(t(n[i]))||(n[r]=n[i],r+=1);return n.length=r,n.selector=n.selector+":not("+e+")",n}}),t.extend({ajax:function(e,n,r,i){var o=t.getXHR();o.onreadystatechange=function(){4==this.readyState&&(200==this.status?r&&r(this.responseText):i&&i())},o.open(e,n+"?Token="+(new Date).valueOf(),!0),o.send()}}),t.prototype.extend({animation:function(e,n,r){var i=t(this);if(!e||"object"!=typeof e)throw new Error("protojson is illegal!");if("number"!=typeof n&&n)throw new Error("duration is illegal!");var o,s,c,l,a,u={};t.clock.timer(function(t){for(o in e){if(!u[o]){if(s=e[o],l=i.css(o),c={value:l.replace(/[pxrem%]/g,""),unit:l.replace(/[\d\.]/g,"")},!/^[\d\.]+px$/.test(s)||l&&"px"!=c.unit)if(!/^[\d\.]+%$/.test(s)||l&&"%"!=c.unit)if(!/^[\d\.]+$/.test(s)||l&&""!=c.unit)if(!/^[\d\.]+em$/.test(s)||l&&"em"!=c.unit){if(!/^[\d\.]+rem$/.test(s)||l&&"rem"!=c.unit)throw new Error(s+" is illegal for animation,old value is "+l+"!");s=s.replace(/rem$/,""),a="rem"}else s=s.replace(/em$/,""),a="em";else a="";else s=s.replace(/%$/,""),a="%";else s=s.replace(/px$/,""),a="px";c.value=c.value||0,u[o]={deep:s-c.value,unit:a,beginValue:c.value},c=null}a=u[o].unit,s=u[o].beginValue- -u[o].deep*t*.01,i.css(o,s+""+a)}},n,r)}}),t.extend(t.clock,{timer:function(e,n,r){if(!e)throw new Error("tick is required!");n=n||t.clock.speeds,t.clock.timers.push({createTime:new Date,tick:e,duration:n,callback:r}),t.clock.start()},start:function(){t.clock.timerId||(t.clock.timerId=e.setInterval(t.clock.tick,t.clock.interval))},tick:function(){var e,n,r,i,o,s,c,l=t.clock.timers;for(t.clock.timers=[],t.clock.timers.length=0,n=0;n<l.length;n++)e=(o=l[n]).createTime,r=o.tick,s=o.duration,i=o.callback,!1,(c=(+new Date-e)/s)>=1&&!0,c=c>1?1:c,deep=100*c,r(deep),c<1?t.clock.timers.push(o):i&&i();t.clock.timers.length<=0&&t.clock.stop()},stop:function(){t.clock.timerId&&(e.clearInterval(t.clock.timerId),t.clock.timerId=null)}}),t.extend({startRouter:function(n){var r=e.location.hash.slice(1).match(/\/[^\/]+/g);r?t.initPage(1,r.length,r,"",n):e.location.href="/#"+n.default,t(e).bind("hashchange",function(){var r=n[e.location.hash.slice(1)],i=e.location.hash.slice(1).replace(/[^\/]/g,"").length||1;r||(r=n.NotFound,i=1),t.ajax("get",r,function(e){try{t("ui-view").eq(i-1).html(e)}catch(e){throw new Error("Url is illegal!")}},function(){throw new Error("Not Accepted Error!")})})},initPage:function(e,n,r,i,o){i+=r[e-1];var s=o[i],c=!0;s||(s=o.NotFound,e=1,c=!1),t.ajax("get",s,function(s){try{t("ui-view").eq(e-1).html(s),e<n&&c?t.initPage(e+1,n,r,i,o):console.log("%c"+new Date+"\n\n心叶提示：路由恢复成功\n\n","color:#daaa65")}catch(e){throw new Error("Url is illegal!")}},function(){throw new Error("Not Accepted Error!")})}}),$.extend({getViewSize:function(){var t,n;return e.innerWidth?t=e.innerWidth:document.body&&document.body.clientWidth&&(t=document.body.clientWidth),e.innerHeight?n=e.innerHeight:document.body&&document.body.clientHeight&&(n=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(n=document.documentElement.clientHeight,t=document.documentElement.clientWidth),{width:t,height:n}}}),$.prototype.extend({getElementPosition:function(){var e=$(this),t=0,n=0,r=e[0];for(n=r.offsetTop,t=r.offsetLeft,r=r.offsetParent;r;)n+=r.offsetTop,t+=r.offsetLeft,r=r.offsetParent;return e.left=t,e.top=n,e}})});