/*!
* yelloxing.github.io Sprout2.0.0 hazy
* https://yelloxing.github.io
* 
* Copyright 心叶 and other contributors
* 
* Released under the Apache-2.0
* 
* Sprout 新芽 V2
* 
* Date: 2017-09-26
*/

!function(t,e,n){"use strict";if(!t||!t.document)throw new Error("Hazy requires a window with a document!");e(t)}(window,function(t){"use strict";var e=function(t,n){return new e.prototype.init(t,n)};e.prototype.init=function(r,i,o){o=o||n,i=i?e(i)[0]:document,this.length=0,this.context=i,this.selector=r;var s,l;if(!r)return this;if("body"==r)return this.context=document,this[0]=document.body,this.isTouch=!0,this.length=1,this;if(r===t)return this.context=document,this[0]=t,this.isTouch=!0,this.length=1,this;if("string"==typeof r){if(e.isHtmlTemplate(r)){var c=document.createElement("div");return c.innerHTML=r,this[0]=c.childNodes[0],this.isTouch=!0,this.length=1,this.context=void 0,this}if(e.isCssSelect(r)){this.isTouch=!0;var a;if(/^#[_\w$](?:[_\w\d$]|-)*$/.test(r))!(a=i.getElementById(r.replace(/^#/,"")))||1!==a.nodeType&&11!==a.nodeType&&9!==a.nodeType?this.length=0:(this[0]=a,this.length=1);else if(/^[_\w$](?:[_\w\d$]|-)*$/.test(r)){var h=i.getElementsByTagName(r);for(s=0,l=0;s<h.length;s++)1!==(a=h[s]).nodeType&&11!==a.nodeType&&9!==a.nodeType||(this[l]=a,l+=1);this.length=l}return this}throw new Error("Illegal argument value！")}if(1===r.nodeType||11===r.nodeType||9===r.nodeType)return this.context=i,this[0]=r,this.isTouch=!0,this.length=1,this;if("function"==typeof r)return e.__isLoad__?r():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),r(),e.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function t(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),r(),e.__isLoad__=!0)}),this;if(r.isTouch){for(this.isTouch=!0,s=0;s<r.length;s++)this[s]=r[s];return this.context=r.context||i,this.length=r.length,this.selector=r.selector,this}return this};var n=e(document);e.prototype.extend=e.extend=function(){var t=arguments[0]||{},e=arguments[1]||{};1===arguments.length&&(e=t,t=this),"object"!=typeof t&&"function"!=typeof t&&(t={});for(var n in e)try{t[n]=e[n]}catch(t){throw new Error("Illegal property value！")}return t},e.innerObject=e.innerObject||{},document.createElement("ui-view"),e.prototype.init.prototype=e.prototype,e.__isLoad__=!1,t.Hazy=t.$=e,e.extend({isHtmlTemplate:function(t){return t=t.trim().replace(/[\n\f\r]/g,""),!!/^<([^<> ]+)[^<>]*><\/\1>$/.test(t)},isCssSelect:function(t){return!!/^#?[_\w$](?:[_\w\d$]|-)*$/.test(t)}}),e.extend({outerHTML:function(t){return t.outerHTML||function(t){var e,n=document.createElement("div");return n.appendChild(t),e=n.innerHTML,n=null,e}(t)},uniqueClass:function(){for(var t="",e=0;e<arguments.length;e++){if("string"!=typeof arguments[e])throw new Error("Only string is valid,not project!");t+=arguments[e]+" "}var n={};(t=t.trim()).split(/ +/).forEach(function(t){n[t]=!0},this),t="";for(var r in n)n[r]&&(t+=r+" ");return t.trim()},operateClass:function(t,e,n){if("string"!=typeof t||"string"!=typeof e)throw new Error("Only string is valid,not project!");t=t.trim(),e=e.trim();var r=t.split(/ +/),i=e.split(/ +/),o={};r.forEach(function(t){o[t]=!0},this),i.forEach(function(t){o[t]=!n&&!o[t]},this);var s="";for(var l in o)o[l]&&(s+=l+" ");return s.trim()},getXHR:function(){var n=e.innerObject.xmlhttp;return n||(n=t.XMLHttpRequest?new t.XMLHttpRequest:new t.ActiveXObject("Microsoft.XMLHTTP"),e.innerObject.xmlhttp=n,n)}}),e.prototype.extend({bind:function(n,r,i){var o=e(this);return t.attachEvent?o[0].attachEvent("on"+n,r):(i=i||!1,o[0].addEventListener(n,r,i)),o},unbind:function(n,r,i){var o=e(this);return t.detachEvent?o[0].detachEvent("on"+n,r):(i=i||!1,o[0].removeEventListener(n,r,i)),o}}),e.prototype.extend({html:function(t){var n=e(this);return""==t||t?(n[0].innerHTML=t,n):n[0].innerHTML},text:function(t){var n=e(this);return t?(n[0].innerText=t,n):n[0].innerText},val:function(t){var n=e(this);return t?(n[0].value=t,n):n[0].value},attr:function(t,n){var r=e(this);return n?(r[0].setAttribute(t,n),r):r[0].getAttribute(t)},addClass:function(t){var n=e(this);if("string"==typeof t&&t)for(var r,i=0,o=n[i];o;){r=o.getAttribute("class")||"";var s=e.uniqueClass(r,t);o.setAttribute("class",s),o=n[i],i+=1}return n},removeClass:function(t){var n=e(this);if("string"==typeof t&&t)for(var r,i=0,o=n[i];o;){r=o.getAttribute("class")||"";var s=e.operateClass(r,t,!0);o.setAttribute("class",s),o=n[i],i+=1}return n},toggleClass:function(t){var n=e(this);if("string"==typeof t&&t)for(var r,i=0,o=n[i];o;){r=o.getAttribute("class")||"";var s=e.operateClass(r,t);o.setAttribute("class",s),o=n[i],i+=1}return n},class:function(t){var n=e(this);if("string"!=typeof t||!t)return n[0].getAttribute("class")||"";for(var r=0,i=n[r];i;)i.setAttribute("class",e.uniqueClass(t)),i=n[r],r+=1;return n},css:function(t,n){var r=e(this);if("string"==typeof t&&1===arguments.length)return r[0].style[t];if("string"==typeof t&&"string"==typeof n)r[0].style[t]=n;else{if("object"!=typeof t)throw new Error("Not acceptable type!");for(var i in t)r[0].style[i]=t[i]}return r},append:function(t){var n=e(this);if(1===t.nodeType||11===t.nodeType||9===t.nodeType)n[0].appendChild(t);else if(t.isTouch)n[0].appendChild(t[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");n[0].appendChild(e(t)[0])}return n},prepend:function(t){var n=e(this);if(1===t.nodeType||11===t.nodeType||9===t.nodeType)n[0].insertBefore(t,n[0].childNodes[0]);else if(t.isTouch)n[0].insertBefore(t[0],n[0].childNodes[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");n[0].insertBefore(e(t)[0],n[0].childNodes[0])}return n},after:function(t){var n=e(this),r=n[0].parentNode||e("body")[0];if(1===t.nodeType||11===t.nodeType||9===t.nodeType)r.insertBefore(t,n[0].nextSibling);else if(t.isTouch)r.insertBefore(t[0],n[0].nextSibling);else{if("string"!=typeof t)throw new Error("Not acceptable type!");r.insertBefore(e(t)[0],n[0].nextSibling)}return n},before:function(t){var n=e(this),r=n[0].parentNode||e("body")[0];if(1===t.nodeType||11===t.nodeType||9===t.nodeType)r.insertBefore(t,n[0]);else if(t.isTouch)r.insertBefore(t[0],n[0]);else{if("string"!=typeof t)throw new Error("Not acceptable type!");r.insertBefore(e(t)[0],n[0])}return n},remove:function(){var t=e(this);return(t[0].parentNode||e("body")[0]).removeChild(t[0]),t},empty:function(){var t=e(this);return t.html(""),t}}),e.prototype.extend({parent:function(){for(var t,n=e(this),r=0,i=n[r];i;){t=i;do{(t=t.parentNode)&&1===t.nodeType?n[r]=t:n[r]=null}while(t.parentNode&&!n[r]);i=n[r+=1]}return n.selector=n.selector+":parent",n},parents:function(){var t=e(this),n=t[0];t.length=0;do{(n=n.parentNode)&&1===n.nodeType&&(t[t.length]=n,t.length+=1)}while(n);return t.selector=t.selector+":parents",t},children:function(){var t=e(this),n=t[0].childNodes,r=0,i=n[r];for(t.length=0;i;)i&&1===i.nodeType&&(t[t.length]=i,t.length++),i=n[r+=1];return t.selector=t.selector+":children",t},siblings:function(){var t=e(this),n=t.parent();return t.selector=t.selector+":siblings",e(n[0]).children()},next:function(){for(var t,n=e(this),r=0,i=n[r];i;){t=i;do{(t=t.nextSibling)&&1===t.nodeType?n[r]=t:n[r]=null}while(t.nextSibling&&!n[r]);i=n[r+=1]}return n.selector=n.selector+":next",n},nextAll:function(){var t=e(this),n=t[0];t.length=0;do{(n=n.nextSibling)&&1===n.nodeType&&(t[t.length]=n,t.length+=1)}while(n);return t.selector=t.selector+":nextAll",t},prev:function(){for(var t,n=e(this),r=0,i=n[r];i;){t=i;do{(t=t.previousSibling)&&1===t.nodeType?n[r]=t:n[r]=null}while(t.previousSibling&&!n[r]);i=n[r+=1]}return n.selector=n.selector+":prev",n},prevAll:function(){var t=e(this),n=t[0];t.length=0;do{(n=n.previousSibling)&&1===n.nodeType&&(t[t.length]=n,t.length+=1)}while(n);return t.selector=t.selector+":prevAll",t},find:function(t){var n=e(this);return e(t,n[0])},first:function(){var t=e(this);return t[0]?t.length=1:t.length=0,t.selector=t.selector+":first",t},last:function(){var t=e(this);return t[t.length-1]?(t[0]=t[t.length-1],t.length=1):t.length=0,t.selector=t.selector+":last",t},eq:function(t){var n=e(this);return n[t]?(n[0]=n[t],n.length=1):n.length=0,n.selector=n.selector+":eq("+t+")",n},filter:function(t){for(var n=e(this),r=0,i=0;i<n.length;i++)t(e(n[i]))&&(n[r]=n[i],r+=1);return n.length=r,n.selector=n.selector+":filter("+t+")",n},not:function(t){for(var n=e(this),r=0,i=0;i<n.length;i++)t(e(n[i]))||(n[r]=n[i],r+=1);return n.length=r,n.selector=n.selector+":not("+t+")",n}}),e.extend({ajax:function(t,n,r,i){var o=e.getXHR();o.onreadystatechange=function(){4==this.readyState&&(200==this.status?r(this.responseText):i())},o.open(t,n+"?Token="+(new Date).valueOf(),!0),o.send()}}),e.extend({startRouter:function(n){var r=t.location.hash.slice(1).match(/\/[^\/]+/g);r?e.initPage(1,r.length,r,"",n):t.location.href="/#"+n.default,e(t).bind("hashchange",function(r){var i=n[t.location.hash.slice(1)];i||(i=n.NotFound),e.ajax("get",i,function(n){var r=t.location.hash.slice(1).replace(/[^\/]/g,"").length||1;try{e("ui-view").eq(r-1).html(n)}catch(t){throw new Error("Url is illegal!")}},function(){throw new Error("Not Accepted Error!")})})},initPage:function(t,n,r,i,o){i+=r[t-1];var s=o[i];s||(s=o.NotFound),e.ajax("get",s,function(s){try{e("ui-view").eq(t-1).html(s),t<n&&e.initPage(t+1,n,r,i,o)}catch(t){throw new Error("Url is illegal!")}},function(){throw new Error("Not Accepted Error!")})}})});