/*!
* yelloxing.github.io 云笔记-遇见更好的你 2.0.1 hazy
* https://yelloxing.github.io
* 
* Copyright 心叶 and other contributors
* 
* Released under the Apache-2.0
* 
* 云笔记-遇见更好的你V2
* 
* Date: 2017-10-09
*/

!function(e,t,n){"use strict";if(!e||!e.document)throw new Error("Hazy requires a window with a document!");t(e)}(window,function(e){"use strict";var t=function(e,n){return new t.prototype.init(e,n)};t.prototype.init=function(o,r,i){i=i||n,r=r?t(r)[0]:document,this.length=0,this.context=r,this.selector=o;var l,c;if(!o)return this;if("body"==o)return this.context=document,this[0]=document.body,this.isTouch=!0,this.length=1,this;if(o===e)return this.context=document,this[0]=e,this.isTouch=!0,this.length=1,this;if("string"==typeof o){if(t.isHtmlTemplate(o)){var s=document.createElement("div");return s.innerHTML=o,this[0]=s.childNodes[0],this.isTouch=!0,this.length=1,this.context=void 0,this}if(t.isCssSelect(o)){this.isTouch=!0;var a;if(/^#[_\w$](?:[_\w\d$]|-)*$/.test(o))!(a=r.getElementById(o.replace(/^#/,"")))||1!==a.nodeType&&11!==a.nodeType&&9!==a.nodeType?this.length=0:(this[0]=a,this.length=1);else if(/^[_\w$](?:[_\w\d$]|-)*$/.test(o)){var u=r.getElementsByTagName(o);for(l=0,c=0;l<u.length;l++)1!==(a=u[l]).nodeType&&11!==a.nodeType&&9!==a.nodeType||(this[c]=a,c+=1);this.length=c}return this}throw new Error("["+o+"]Illegal argument value！")}if(1===o.nodeType||11===o.nodeType||9===o.nodeType)return this.context=r,this[0]=o,this.isTouch=!0,this.length=1,this;if("function"==typeof o)return t.__isLoad__?o():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),o(),t.__isLoad__=!0}):document.attachEvent&&document.attachEvent("onreadystatechange",function e(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),o(),t.__isLoad__=!0)}),this;if(o.isTouch){for(this.isTouch=!0,l=0;l<o.length;l++)this[l]=o[l];return this.context=o.context||r,this.length=o.length,this.selector=o.selector,this}return this};var n=t(document);t.prototype.extend=t.extend=function(){var e=arguments[0]||{},t=arguments[1]||{};1===arguments.length&&(t=e,e=this),"object"!=typeof e&&"function"!=typeof e&&(e={});for(var n in t)try{e[n]=t[n],/^hazy-/.test(n)&&document.createElement(n)}catch(e){throw new Error("Illegal property value！")}return e},t.innerObject={},t.innerObject.component={},t.looper={},t.looper.task=[],t.looper.isRun=!1,t.clock={},t.clock.timers=[],t.clock.interval=13,t.clock.speeds=400,t.clock.timerId=null,t.StepByStep={},t.routerStyle={},document.createElement("hazy-view"),t.prototype.init.prototype=t.prototype,t.__isLoad__=!1,e.Hazy=e.$=t,console.log("%c"+new Date+"\n\n心叶提示：系统启动成功\n\n","color:#daaa65"),t.extend({isHtmlTemplate:function(e){return e=e.trim().replace(/[\n\f\r ]/g,""),!!/^<([^<> ]+).*><\/\1>$/.test(e)||!!/^<!--.*-->$/.test(e)},isCssSelect:function(e){return!!/^#?[_\w$](?:[_\w\d$]|-)*$/.test(e)}}),t.extend({outerHTML:function(e){return e.outerHTML||function(e){var t,n=document.createElement("div");return n.appendChild(e),t=n.innerHTML,n=null,t}(e)},uniqueClass:function(){for(var e="",t=0;t<arguments.length;t++){if("string"!=typeof arguments[t])throw new Error("Only string is valid,not project!");e+=arguments[t]+" "}var n={};(e=e.trim()).split(/ +/).forEach(function(e){n[e]=!0},this),e="";for(var o in n)n[o]&&(e+=o+" ");return e.trim()},operateClass:function(e,t,n){if("string"!=typeof e||"string"!=typeof t)throw new Error("Only string is valid,not project!");e=e.trim(),t=t.trim();var o=e.split(/ +/),r=t.split(/ +/),i={};o.forEach(function(e){i[e]=!0},this),r.forEach(function(e){i[e]=!n&&!i[e]},this);var l="";for(var c in i)i[c]&&(l+=c+" ");return l.trim()},getXHR:function(){var n=t.innerObject.xmlhttp;return n||(n=e.XMLHttpRequest?new e.XMLHttpRequest:new e.ActiveXObject("Microsoft.XMLHTTP"),t.innerObject.xmlhttp=n,n)}}),t.extend({compiler:function(e){var n,o,r,i,l=t.innerObject.component;for(n in l)for(r=t(n,e),o=0;o<r.length;o++){if((i=t(r[o])).attr(n+"-compiler"))throw new Error(n+" had compiler");l[n](i),i.attr(n+"-compiler",new Date),i.prepend("\x3c!--"+n+" Begin 【走一步 再走一步】--\x3e"),i.append("\x3c!--"+n+" End 【走一步 再走一步】--\x3e")}l=null,n=null,r=null,i=null}}),t.prototype.extend({bind:function(n,o,r){var i=t(this);return e.attachEvent?i[0].attachEvent("on"+n,o):(r=r||!1,i[0].addEventListener(n,o,r)),i},unbind:function(n,o,r){var i=t(this);return e.detachEvent?i[0].detachEvent("on"+n,o):(r=r||!1,i[0].removeEventListener(n,o,r)),i}}),t.prototype.extend({html:function(e){var n=t(this);return""==e||e?(n[0].innerHTML=e,n):n[0].innerHTML},text:function(e){var n=t(this);return e?(n[0].innerText=e,n):n[0].innerText},val:function(e){var n=t(this);return e?(n[0].value=e,n):n[0].value},attr:function(e,n){var o=t(this);return n?(o[0].setAttribute(e,n),o):o[0].getAttribute(e)},addClass:function(e){var n=t(this);if("string"==typeof e&&e)for(var o,r=0,i=n[r];i;){o=i.getAttribute("class")||"";var l=t.uniqueClass(o,e);i.setAttribute("class",l),i=n[r],r+=1}return n},removeClass:function(e){var n=t(this);if("string"==typeof e&&e)for(var o,r=0,i=n[r];i;){o=i.getAttribute("class")||"";var l=t.operateClass(o,e,!0);i.setAttribute("class",l),i=n[r],r+=1}return n},toggleClass:function(e){var n=t(this);if("string"==typeof e&&e)for(var o,r=0,i=n[r];i;){o=i.getAttribute("class")||"";var l=t.operateClass(o,e);i.setAttribute("class",l),i=n[r],r+=1}return n},class:function(e){var n=t(this);if("string"!=typeof e||!e)return n[0].getAttribute("class")||"";for(var o=0,r=n[o];r;)r.setAttribute("class",t.uniqueClass(e)),r=n[o],o+=1;return n},css:function(e,n){var o=t(this);if("string"==typeof e&&1===arguments.length)return o[0].style[e];if("string"==typeof e&&"string"==typeof n)o[0].style[e]=n;else{if("object"!=typeof e)throw new Error("Not acceptable type!");for(var r in e)o[0].style[r]=e[r]}return o},append:function(e){var n=t(this);if(1===e.nodeType||11===e.nodeType||9===e.nodeType)n[0].appendChild(e);else if(e.isTouch)n[0].appendChild(e[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");n[0].appendChild(t(e)[0])}return n},prepend:function(e){var n=t(this);if(1===e.nodeType||11===e.nodeType||9===e.nodeType)n[0].insertBefore(e,n[0].childNodes[0]);else if(e.isTouch)n[0].insertBefore(e[0],n[0].childNodes[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");n[0].insertBefore(t(e)[0],n[0].childNodes[0])}return n},after:function(e){var n=t(this),o=n[0].parentNode||t("body")[0];if(1===e.nodeType||11===e.nodeType||9===e.nodeType)o.insertBefore(e,n[0].nextSibling);else if(e.isTouch)o.insertBefore(e[0],n[0].nextSibling);else{if("string"!=typeof e)throw new Error("Not acceptable type!");o.insertBefore(t(e)[0],n[0].nextSibling)}return n},before:function(e){var n=t(this),o=n[0].parentNode||t("body")[0];if(1===e.nodeType||11===e.nodeType||9===e.nodeType)o.insertBefore(e,n[0]);else if(e.isTouch)o.insertBefore(e[0],n[0]);else{if("string"!=typeof e)throw new Error("Not acceptable type!");o.insertBefore(t(e)[0],n[0])}return n},remove:function(){var e=t(this);return(e[0].parentNode||t("body")[0]).removeChild(e[0]),e},empty:function(){var e=t(this);return e.html(""),e}}),t.prototype.extend({parent:function(){for(var e,n=t(this),o=0,r=n[o];r;){e=r;do{(e=e.parentNode)&&1===e.nodeType?n[o]=e:n[o]=null}while(e.parentNode&&!n[o]);r=n[o+=1]}return n.selector=n.selector+":parent",n},parents:function(){var e=t(this),n=e[0];e.length=0;do{(n=n.parentNode)&&1===n.nodeType&&(e[e.length]=n,e.length+=1)}while(n);return e.selector=e.selector+":parents",e},children:function(){var e=t(this),n=e[0].childNodes,o=0,r=n[o];for(e.length=0;r;)r&&1===r.nodeType&&(e[e.length]=r,e.length++),r=n[o+=1];return e.selector=e.selector+":children",e},siblings:function(){var e=t(this),n=e.parent();return e.selector=e.selector+":siblings",t(n[0]).children()},next:function(){for(var e,n=t(this),o=0,r=n[o];r;){e=r;do{(e=e.nextSibling)&&1===e.nodeType?n[o]=e:n[o]=null}while(e.nextSibling&&!n[o]);r=n[o+=1]}return n.selector=n.selector+":next",n},nextAll:function(){var e=t(this),n=e[0];e.length=0;do{(n=n.nextSibling)&&1===n.nodeType&&(e[e.length]=n,e.length+=1)}while(n);return e.selector=e.selector+":nextAll",e},prev:function(){for(var e,n=t(this),o=0,r=n[o];r;){e=r;do{(e=e.previousSibling)&&1===e.nodeType?n[o]=e:n[o]=null}while(e.previousSibling&&!n[o]);r=n[o+=1]}return n.selector=n.selector+":prev",n},prevAll:function(){var e=t(this),n=e[0];e.length=0;do{(n=n.previousSibling)&&1===n.nodeType&&(e[e.length]=n,e.length+=1)}while(n);return e.selector=e.selector+":prevAll",e},find:function(e){var n=t(this);return t(e,n[0])},first:function(){var e=t(this);return e[0]?e.length=1:e.length=0,e.selector=e.selector+":first",e},last:function(){var e=t(this);return e[e.length-1]?(e[0]=e[e.length-1],e.length=1):e.length=0,e.selector=e.selector+":last",e},eq:function(e){var n=t(this);return n[e]?(n[0]=n[e],n.length=1):n.length=0,n.selector=n.selector+":eq("+e+")",n},filter:function(e){for(var n=t(this),o=0,r=0;r<n.length;r++)e(t(n[r]))&&(n[o]=n[r],o+=1);return n.length=o,n.selector=n.selector+":filter("+e+")",n},not:function(e){for(var n=t(this),o=0,r=0;r<n.length;r++)e(t(n[r]))||(n[o]=n[r],o+=1);return n.length=o,n.selector=n.selector+":not("+e+")",n}}),t.extend({ajax:function(e,n,o,r){var i=t.getXHR();i.onreadystatechange=function(){4==this.readyState&&(200==this.status?o&&o(this.responseText):r&&r())},i.open(e,n+"?Token="+(new Date).valueOf(),!0),i.send()}}),t.prototype.extend({animation:function(e,n,o){var r=t(this);if(!e||"object"!=typeof e)throw new Error("protojson is illegal!");if("number"!=typeof n&&n)throw new Error("duration is illegal!");var i,l,c,s,a,u={};t.clock.timer(function(t){for(i in e){if(!u[i]){if(l=e[i],s=r.css(i),c={value:s.replace(/[pxrem%]/g,""),unit:s.replace(/[\d\.]/g,"")},!/^[\d\.]+px$/.test(l)||s&&"px"!=c.unit)if(!/^[\d\.]+%$/.test(l)||s&&"%"!=c.unit)if(!/^[\d\.]+$/.test(l)||s&&""!=c.unit)if(!/^[\d\.]+em$/.test(l)||s&&"em"!=c.unit){if(!/^[\d\.]+rem$/.test(l)||s&&"rem"!=c.unit)throw s=s||"undefined",new Error(l+" is illegal for animation,old value is "+s+"!");l=l.replace(/rem$/,""),a="rem"}else l=l.replace(/em$/,""),a="em";else a="";else l=l.replace(/%$/,""),a="%";else l=l.replace(/px$/,""),a="px";c.value=c.value||0,u[i]={deep:l-c.value,unit:a,beginValue:c.value},c=null}a=u[i].unit,l=u[i].beginValue- -u[i].deep*t*.01,r.css(i,l+""+a)}},n,o)}}),t.extend(t.clock,{timer:function(e,n,o){if(!e)throw new Error("tick is required!");n=n||t.clock.speeds,t.clock.timers.push({createTime:new Date,tick:e,duration:n,callback:o}),t.clock.start()},start:function(){t.clock.timerId||(t.clock.timerId=e.setInterval(t.clock.tick,t.clock.interval))},tick:function(){var e,n,o,r,i,l,c,s=t.clock.timers;for(t.clock.timers=[],t.clock.timers.length=0,n=0;n<s.length;n++)e=(i=s[n]).createTime,o=i.tick,l=i.duration,r=i.callback,!1,(c=(+new Date-e)/l)>=1&&!0,o(100*(c=c>1?1:c)),c<1?t.clock.timers.push(i):r&&r();t.clock.timers.length<=0&&t.clock.stop()},stop:function(){t.clock.timerId&&(e.clearInterval(t.clock.timerId),t.clock.timerId=null)}}),t.extend(t.looper,{loop:function(e){t.looper.task.unshift(e),t.looper.start()},start:function(){t.looper.isRun||(t.looper.isRun=!0,t.looper.do())},do:function(){t.looper.task.length<=0?t.looper.isRun=!1:(t.looper.task.pop()(),t.looper.do())}}),$.extend(t.StepByStep,{pwd:"",toggle:function(){$.StepByStep.pwd="",$("#StepByStep").length<1?$("body").append("<ul class='StepByStep' id='StepByStep'>   <li onclick='$.StepByStep.input(\"0\")'>0</li>   <li onclick='$.StepByStep.input(\"1\")'>1</li>   <li onclick='$.StepByStep.input(\"2\")'>2</li>   <li onclick='$.StepByStep.input(\"3\")'>3</li>   <li onclick='$.StepByStep.input(\"4\")'>4</li>   <li onclick='$.StepByStep.input(\"5\")'>5</li>   <li onclick='$.StepByStep.input(\"6\")'>6</li>   <li onclick='$.StepByStep.input(\"7\")'>7</li>   <li onclick='$.StepByStep.input(\"8\")'>8</li>   <li onclick='$.StepByStep.input(\"9\")'>9</li></ul>"):$("#StepByStep").remove()},input:function(e){$.StepByStep.pwd+=e}}),t.extend({startRouter:function(n){var o=e.location.hash.slice(1).match(/\/[^\/]+/g);o?t.initPage(1,o.length,o,"",n):e.location.href="/#"+n.default,t(e).bind("hashchange",function(){var o=n[e.location.hash.slice(1)]||n[n.default],r=o.src,i=o.deep||e.location.hash.slice(1).replace(/[^\/]/g,"").length||1;r||(r=n.NotFound,i=1),t.ajax("get",r,function(n){try{t("hazy-view").eq(i-1).html(n),t.compiler(t("hazy-view")[i-1]),t.routerStyle.changeClick(e.location.hash.slice(1).replace(/^.*\//,""),e.location.hash.slice(1).replace(/[^\/]/g,"").length||1)}catch(t){e.location.reload()}},function(){throw new Error("Not Accepted Error!")})})},initPage:function(n,o,r,i,l){i+=r[n-1];var c=l[i]||l.NotFound,s=c.deep||n,a=c.src,u=!0;a||(a=l.NotFound,o=1,s=1,u=!1),t.ajax("get",a,function(c){t("hazy-view").eq(s-1).html(c),n<o&&u?t.initPage(n+1,o,r,i,l):(t.routerStyle.initClick(e.location.hash.slice(1)),console.log("%c"+new Date+"\n\n心叶提示：路由恢复成功\n\n","color:#daaa65"),t.compiler(t("hazy-view")[0]))},function(){throw new Error("Not Accepted Error!")})}}),t.extend(t.innerObject.component,{"hazy-copy":function(e){e.prepend("<div class='hazy-copy-button'>\x3c!--copy--\x3e</div>"),e.find("div").filter(function(e){return"hazy-copy-button"===e.class()}).bind("click",function(t){e.clipboard()})}}),t.prototype.extend({clipboard:function(){var e=t(this);return t.notify("复制功能开发中，请稍后。。。。。。"),e}}),$.extend({getViewSize:function(){var t,n;return e.innerWidth?t=e.innerWidth:document.body&&document.body.clientWidth&&(t=document.body.clientWidth),e.innerHeight?n=e.innerHeight:document.body&&document.body.clientHeight&&(n=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(n=document.documentElement.clientHeight,t=document.documentElement.clientWidth),{width:t,height:n}},notify:function(n){t.looper.loop(function(){e.alert(n)})}}),$.prototype.extend({getElementPosition:function(){var e=$(this),t=0,n=0,o=e[0];for(n=o.offsetTop,t=o.offsetLeft,o=o.offsetParent;o;)n+=o.offsetTop,t+=o.offsetLeft,o=o.offsetParent;return e.left=t,e.top=n,e}}),t.extend(t.routerStyle,{initClick:function(e){var n,o=e.replace(/^\//,"").split(/\//);for(n=0;n<o.length;n++)t.routerStyle.changeClick(o[n],n+1)},changeClick:function(e,t){switch(t){case 1:(n={home:1,notebook:2,opensource:3,case:4,other:5}[e])&&$("#deeponemenu").length>0&&$("#deeponemenu").find("li").removeClass("click").eq(n-1).addClass("click");break;case 2:var n={attribute:1,algorithm:2,tool:3,label:4,other:5}[e];n&&$("#deeptwomenu").length>0&&$("#deeptwomenu").find("li").removeClass("click").eq(n-1).addClass("click")}}})});