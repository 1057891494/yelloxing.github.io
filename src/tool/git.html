<article class='__blog__'>
    <hgroup class='header'>
        <h1 class='title'>Git使用</h1>
        <h2 class='time'>2017-08-31&nbsp;&nbsp;星期四&nbsp;&nbsp;南京&nbsp;雨</h2>
    </hgroup>
    <p class='flag'>
        这里介绍的是Git的命令行使用和一些基本概念，不会涉及服务器方面的学习，并且这是一个循序渐进的笔记，在使用中不断提取重要的命令加以记录。
    </p>
    <section class='section block'>
        <h1 class='section title'>基本概念</h1>
        <div class='terminal info'>
            工作区：就是你在电脑里能看到的目录
        </div>
        <div class='terminal info'>
            暂存区：英文叫stage, 或index。一般存放在 ".git目录下" 下的index文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）
        </div>
        <div class='terminal info'>
            版本库：工作区有一个隐藏目录.git，这个不算工作区，而是Git的版本库
        </div>
    </section>
    <section class='section block'>
        <h1 class='section title'>常用命令</h1>
        <ul>
            <li>
                <h2 class='small title'>git config</h2>
                <p class='small flag'>
                    关于git的一些配置的设置和查看都可以很方便的通过这个命令。
                </p>
                <ul>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git config [--global] user.name [username]
                            </div>
                            <div class='terminal bash'>
                                git config [--global] user.email [email]
                            </div>
                        </div>
                        <div class='terminal info'>
                            常用的其实就是上面的命令，分别表示用户名和邮箱，其中--global带和不带的区别在于操作文件是.git/config还是~/.gitconfig，如果你使用的是--system则对应的就是/etc/gitconfig文件。
                        </div>
                        <div class='terminal info'>
                            对于是否在最后带username或email，区别在于你是设置还是查看。
                        </div>
                    </li>
                </ul>
                <h2 class='small title'>基本命令</h2>
                <p class='small flag'>
                    下面先介绍几个比较简单但使用频率很高或有用的命令。
                </p>
                <ul>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git [--bare] init [--shared]
                            </div>
                        </div>
                        <div class='terminal info'>
                            使用该命令会在目录中创建新的Git仓库，本地化的。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git status
                            </div>
                        </div>
                        <div class='terminal info'>
                            执行该命令可以知道仓库目前的状态，是否是最新代码，有没有修改等。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git clone uri [dir]
                            </div>
                        </div>
                        <div class='terminal info'>
                            把uri指定的仓库代码克隆到本地来，如果加了可选参数dir，表示克隆到改文件夹下。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git add filename|-A
                            </div>
                        </div>
                        <div class='terminal info'>
                            添加文件到缓冲区，你可以指定添加的文件filename，也可以使用-A把文件夹下全部文件添加到缓冲区。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git commit [-m remark]
                            </div>
                        </div>
                        <div class='terminal info'>
                            提交代码到本地仓库，-m后面的remark表示对这次提交的描述。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git push storehouseName branchName
                            </div>
                        </div>
                        <div class='terminal info'>
                            提交代码到远程服务器，storehouseName是对应的仓库名称，branchName是分支名称。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git pull storehouseName branchName
                            </div>
                        </div>
                        <div class='terminal info'>
                            从远程服务器拉取代码更新，storehouseName是对应的仓库名称，branchName是分支名称。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git remote add storehouseName uri
                            </div>
                        </div>
                        <div class='terminal info'>
                            添加连接的远程仓库，其中storehouseName是给仓库起的名称，uri是仓库地址。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git remote rm storehouseName
                            </div>
                        </div>
                        <div class='terminal info'>
                            删除连接的远程仓库，其中storehouseName是给仓库起的名称。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git remote rename oldStorehouseName newStorehouseName
                            </div>
                        </div>
                        <div class='terminal info'>
                            修改远程主机oldStorehouseName名称为newStorehouseName。
                        </div>
                    </li>
                </ul>
                <h2 class='small title'>分支</h2>
                <p class='small flag'>
                    分支的建立可以帮助多人合作开发变得更加方便，比如在结束一个功能之后才合并到主分支上。
                </p>
                <ul>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git branch branchname
                            </div>
                        </div>
                        <div class='terminal info'>
                            创建一个名称叫branchname的分支，此分支初始化拥有的是你创建此分支时活跃分支。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git branch
                            </div>
                        </div>
                        <div class='terminal info'>
                            查看分支状态，如果使用-r（即：git branch -r）表示查看远程分支状态，-a选项查看所有分支。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git checkout branchname
                            </div>
                        </div>
                        <div class='terminal info'>
                            切换当前活跃分支为branchname。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git merge branchname
                            </div>
                        </div>
                        <div class='terminal info'>
                            合并分支到当前活跃分支。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git branch -d branchname
                            </div>
                        </div>
                        <div class='terminal info'>
                            删除本地指定分支branchname。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git push --delete branchname
                            </div>
                        </div>
                        <div class='terminal info'>
                            删除远程指定分支branchname。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git branch -m oldBranchname newBranchname
                            </div>
                        </div>
                        <div class='terminal info'>
                            修改本地分支oldBranchname的名称为newBranchname。
                        </div>
                    </li>
                </ul>
                <h2 class='small title'>查看</h2>
                <p class='small flag'>
                    查看相关的命令非常丰富，这里只是介绍常用的，不会全部列出。
                </p>
                <ul>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git log [-num|fileName|branchName|commit|]
                            </div>
                        </div>
                        <div class='terminal info'>
                            查看日志，后面的那些可选参数是对日志过滤以后再显示，-num举个例子：-2表示查看最近2次的提交历史记录，后面的fileName和branchName方便表示查看特定文件和分支的日志，commit代表查看提交日志。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git show hashname|tagname
                            </div>
                        </div>
                        <div class='terminal info'>
                            查看一次具体提交的具体信息，其中hashname是hash值，开头可以唯一标志 就可以了，tagname是标签名称。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git diff commitFromHashname..commitToHashname
                            </div>
                        </div>
                        <div class='terminal info'>
                            查看二次提交对比修改了什么，可以看见他们之间的全部更改。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git fetch storehouseName [branchName]
                            </div>
                        </div>
                        <div class='terminal info'>
                            查看远程仓库，你可以选择是否指定分支，干了什么，不会对本地产生影响。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git reflog
                            </div>
                        </div>
                        <div class='terminal info'>
                            显示整个本地仓储的commit，包括所有branch的commit，甚至包括已经撤销的commit，只要HEAD发生了变化，就会在reflog里面看得到，git log只包括当前分支的commit。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git remote
                            </div>
                        </div>
                        <div class='terminal info'>
                            列出所有远程主机，使用-v选项（即：git remote -v），可以参看远程主机的网址。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git remote show storehouseName
                            </div>
                        </div>
                        <div class='terminal info'>
                            列出指定主机storehouseName的详细信息。
                        </div>
                    </li>
                </ul>
                <h2 class='small title'>标签</h2>
                <p class='small flag'>
                    可以用标签的方式来在一个版本的时候标记一下。
                </p>
                <ul>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git tag -a tagname -m tagremark
                            </div>
                        </div>
                        <div class='terminal info'>
                            打一个名称为tagname并添加该标签的注释为tagremark的标签。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git tag
                            </div>
                        </div>
                        <div class='terminal info'>
                            查看已经打的标签。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git tag -d tagname
                            </div>
                        </div>
                        <div class='terminal info'>
                            删除标签tagname。
                        </div>
                    </li>
                </ul>
                <h2 class='small title'>回退</h2>
                <ul>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git checkout hashname filename
                            </div>
                        </div>
                        <div class='terminal info'>
                            将特定的filename文件回滚到hashname提交。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git checkout .
                            </div>
                        </div>
                        <div class='terminal info'>
                            用暂存区的所有文件直接覆盖本地文件，不给用户任何确认的机会，可以理解放弃本地修改。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git commit —amend
                            </div>
                        </div>
                        <div class='terminal info'>
                            如果发现最新的一次提交完了加某个文件,它会把最新的提交打回暂存区，并尝试重新提交。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git revert HEAD|hashname
                            </div>
                        </div>
                        <div class='terminal info'>
                            回滚提交，其中HEAD是最新的一次提交别名。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git reset -- filename
                            </div>
                        </div>
                        <div class='terminal info'>
                            把add添加的文件filename从缓冲区删除。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git reset --hard hashname
                            </div>
                        </div>
                        <div class='terminal info'>
                            恢复到hashname指定的提交时，不保留修改。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git reset --soft hashname
                            </div>
                        </div>
                        <div class='terminal info'>
                            恢复到hashname指定的提交时，保留修改。
                        </div>
                    </li>
                </ul>
                <h2 class='small title'>暂存</h2>
                <p class='small flag'>
                    可以用git stash的方式来暂存当前正在进行的工作并在需要的时候恢复。
                </p>
                <ul>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git stash
                            </div>
                        </div>
                        <div class='terminal info'>
                            暂存当前正在进行的工作，比如想pull最新代码，又不想加新commit，或者另外一种情况，为了fix一个紧急的bug，先stash，使返回到自己上一个commit,改完bug之后再stash pop，继续原来的工作。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git stash pop
                            </div>
                        </div>
                        <div class='terminal info'>
                            取出最后暂存的，并从暂存栈移除。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git stash list
                            </div>
                        </div>
                        <div class='terminal info'>
                            将当前的暂存栈信息打印出来。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git stash clear
                            </div>
                        </div>
                        <div class='terminal info'>
                            将暂存栈清空。
                        </div>
                    </li>
                    <li>
                        <div class='terminal frame'>
                            <div class='terminal bash'>
                                git stash apply stash@{num}
                            </div>
                        </div>
                        <div class='terminal info'>
                            将你指定版本号为stash@{num}的工作取出来。
                        </div>
                    </li>
                </ul>
            </li>
        </ul>
    </section>
</article>
